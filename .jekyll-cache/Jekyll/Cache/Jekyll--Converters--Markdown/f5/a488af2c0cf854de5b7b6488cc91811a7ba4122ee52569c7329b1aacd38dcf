I"k
<p>Users &amp; roles seeding in an app is an optional but one of the important tasks you should consider while building your application authentication. Instead of creating a data via your app form, using data seeding, you can directly populate data upon EF migration. This feature is called ‚ÄúModel seed data‚Äù or <a href="https://docs.microsoft.com/en-us/ef/core/modeling/data-seeding" target="_blank">‚ÄúData Seeding‚Äù</a> and it‚Äôs out since EF Core 2.1.</p>

<p>In this blog, we‚Äôre going to use this feature to seed users &amp; roles because we want our ASP.NET Core app to have its default user and role data.</p>

<h3 id="ftf-first-things-first">FTF (First Things First)</h3>

<p>Make sure you already setup your ASP.NET Core app identity models and your database context (DbContext).
In this demo, I‚Äôm using ASP.NET Core 3.0 and it‚Äôs ready for user and role seeding.</p>

<h3 id="role-seeding">Role Seeding</h3>
<p>First, let‚Äôs seed roles. Inside the <code class="highlighter-rouge">OnModelCreating</code> of your DbContext file, add this code.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>builder.Entity&lt;Role&gt;().HasData(new List&lt;Role&gt;
{
    new Role {Id = 1, Name = "Admin", NormalizedName = "ADMIN"},
    new Role {Id = 2, Name = "Staff", NormalizedName = "STAFF"},
});
</code></pre></div></div>

<p><code class="highlighter-rouge">NormalizedName</code> must always be upper case.</p>

<h3 id="user-seeding">User Seeding</h3>

<p>Locate your the method that implements <code class="highlighter-rouge">DbContextOptionsBuilder optionsBuilder</code> and update your connection string similar to this. Normally you can find them in your Startup.cs or in your DbContext file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>optionsBuilder.UseNpgsql(@"Server=127.0.0.1;Port=5432;Database=myDataBase;User Id=myUsername;Password=myPassword;");
</code></pre></div></div>

<p>The example above is only a standard connection string, if you want the other options, you can find them <a href="https://www.connectionstrings.com/postgresql/">here</a>.</p>

<h3 id="30-execute-database-migrations">3.0 Execute database migrations.</h3>

<p>One you finish the steps above, you can now do the migrations and database update using your command line.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet ef migrations add InitialCreateToPostgreSQL

dotnet ef database update
</code></pre></div></div>

<p>That‚Äôs it. It‚Äôs very simple to setup!</p>

<p>If you have some questions or comments, please drop it below üëá :)</p>
:ET